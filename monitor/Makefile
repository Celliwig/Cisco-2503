TARGET = monitor-simple.o monitor-simple.run monitor-simple.bin monitor-simple.hex

all: $(TARGET)

monitor-simple.o: monitor-simple.s
	m68k-linux-gnu-as -m68000 -a=monitor-simple.lst -o monitor-simple.o monitor-simple.s

monitor-simple.run: monitor-simple.o
	m68k-linux-gnu-objcopy -I elf32-m68k -O srec monitor-simple.o monitor-simple.run

monitor-simple.bin: monitor-simple.o
	m68k-linux-gnu-objcopy -I elf32-m68k -O binary monitor-simple.o monitor-simple.bin

monitor-simple.hex: monitor-simple.run
	srec_cat monitor-simple.run -Motorola -output monitor-simple.hex -Intel

#monitor.o: monitor.s
#	m68k-elf-as -m68000 -a=monitor.lst -o monitor.o monitor.s

#monitor.run: monitor.o
#	m68k-elf-objcopy -I elf32-m68k -O srec monitor.o temp
#	srec_cat temp -fill 0x00 0x8000 0xc000 --crop 0x8000 0xc000 -o monitor.run
#	srec_cat monitor.run -split 2 0 -offset 0x4000 -o monitor_even.run
#	srec_cat monitor.run -split 2 1 -offset 0x4000 -o monitor_odd.run
#	$(RM) temp

#monitor.bin: monitor.o
#	m68k-elf-objcopy -I elf32-m68k -O binary monitor.o monitor.bin

#monitor.hex: monitor.run
#	srec_cat monitor.run -Motorola -output monitor.hex -Intel

clean:
	$(RM) monitor-simple.o monitor-simple.run monitor-simple.bin monitor-simple.hex
#	$(RM) monitor.lst monitor.o monitor.run monitor.bin
#	$(RM) monitor_even.run monitor_odd.run monitor.hex minimon.hex
